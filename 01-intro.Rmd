# Introduction

This book teaches reproducible road safety analysis with R.
It was initially developed for a 2 day [Introduction to R for Road Safety](https://www.racfoundation.org/introduction-to-r-for-road-safety).
Since then, interest in the topic has grown.
The [RAC Foundation](https://www.racfoundation.org/) charity in the UK funded the development of this book as a free and open resource to support their objective of making the roads safer for everyone.
The content is based on open access road crash data from the UK, which is provided by the R package **stats19** [@lovelace_stats19_2019].
However, the content is designed to be general and should be of use to **anyone working with road crash data worldwide** that has (at a minimum):

- A timestamp
- A location (or address that can be geocoded)
- Attribute data, such as severity of crash, and type of vehicles involved

The book is based on open source software, which knows no borders: R works equally well in China, India, the USA and the UK.
The book is practical, meaning that you should reproduce the examples that are provided throughout.
As with many practical skills you learn data science by *doing* data science.

Before getting stuck in with the practical content, which begins in Chapter \@ref(r-basics), the rest of this chapter:

- introduces the concept reproducibility and its importance for evidence-based policies
- explains the choice of R as a 'tool of the trade' for road safety research
- outlines how to install R on your computer or access it through remote servers in the 'cloud', and
- explains the structure of the book, outlines chapter contents and how they should be used for maximum benefit depending on your level of experience and aims (Section \@ref(overview))

## Reproducibility

Reproducible research can be defined as work that generates results that can be re-generated by others using publicly accessible code [@lovelace_geocomputation_2019].
By contrast, findings that cannot be repeated are **not reproducible**.

Reproducibility is not a binary concept but a continuum.
On one hand, there is work that does not report the data source, methods or software.
On the other hand are findings that can be reproduced in their entirety, including the production of figures and, as is the case with this book, the manuscript/medium in which results are presented.
Reproducibility can be built into every stage of quantitative research, as shown in Table \@ref(tab:reproducibility).^[
See @peng_reproducible_2006 for a detailed account of how to ensure reproducibility.
]

```{r reproducibility, message=FALSE, echo=FALSE}
re = readr::read_csv("reproducibility.csv")
knitr::kable(re, caption = "Four elements of reproducibility adapted from Peng, Dominici, and Zeger (2006).")
```

The importance of reproducibility in scientific research should be obvious: if findings cannot be repeated, this casts doubt on the validity, truth, of the conclusions drawn from them.
Reproducibility is vital for *falsifiability*, a cornerstone of science [@popper_logic_1959].

In applied, policy-relevant research areas such as road safety research, reproducibility is equally important:
policy makers and the public want to have confidence that the evidence underlying key decisions is reliable.
Policies based on results that nobody can reproduce are based are harder to defend than policies that based on clear evidence base that others, including members of the public and educators, can repeat.
In transport planning, open and reproducible methods support more transparent and democratically accountable interventions [@lovelace_open_2020].
Reproducibility lead to solid science which is conducive to effective policies.
In the context of road safety research, this means that **reproducibility can save lives**.

## Why R for road safety research?

R is an outstanding language for reproducible research.
It is an accessible piece of software and contains many packages explicitly designed to enable more reproducible research, including `markdown` and the `reprex` package.

From a road safety perspective, R is well suited to handling data structures used in road safety research.
R excels at the processing, analysis, modelling and visualisation of large spatio-temporal and attribute-rich datasets of the type key to road safety research.
R is a mature and growing tool for data science popular in industry, academia and government, so creates multiple opportunities for collaboration, within and between organisations and internationally.

It is important to have an up-to-date version of R installed before proceeding to the practical sections.
This and other prerequisites are covered in the next section.

## Prerequisites

If you are not experienced with R, it is strongly advised that you read-up on and more importantly **test out** R and RStudio before attempting analyse road crash data with R.
See the `stats19-training-setup` vignette at https://docs.ropensci.org/stats19/articles/stats19-training-setup.html for guidance on getting started with R, RStudio and installing R packages.

The completing the course requires that the following packages, which can be installed with `install.packages()`, can be loaded as follows:

```{r, message=FALSE, warning=FALSE, eval=FALSE}
library(pct)      # access travel data from DfT-funded PCT project 
library(sf)       # spatial vector data classes
library(stats19)  # get stats19 data
library(stplanr)  # transport planning tools
library(tidyverse)# packages for 'data science'
library(tmap)     # interactive maps
```

You should type, run and ensure you understand each line of code in this document.


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  out.width = "50%"
)
```


```{r pkgs, warning=FALSE, echo=FALSE}
pkgs = c(
  "sf",          # spatial data package
  "stats19",     # downloads and formats open stats19 crash data
  "dplyr",       # a package data manipulation, part of the tidyverse
  "tmap"         # for making maps
)
```

```{r cite, echo=FALSE}
knitr::write_bib(x = pkgs, "packages.bib")
```

```{r, eval=FALSE, echo=FALSE}
remotes::install_cran(pkgs)
# remotes::install_github("ITSLeeds/pct")
```

## Installing R and RStudio


## R in the cloud

## Overview

Todo: add brief introduction to the rest of the book.
